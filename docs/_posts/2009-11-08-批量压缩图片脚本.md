---
title: "批量压缩图片脚本"
date: 2009-11-08
author: pengjianqing
categories: ['BASH', 'shell']
---

要批量转换一批相片，相机分辨率调的很高，图片大小是4M多的，如果上传到网站的话，太大了。
所以需要将它进行格式转换，将它转小一点。
用到的命令就是convert了压缩图片必备的工具。
我这里用到了两种压缩的方式：
一种是按照图片质量进行压缩（-quality）
一种是按照图片分辨率比例进行压缩（-resize）

convert的参数很多，很强大，这里只用到了它的很小的一个功能，更多功能还有待挖掘。

[原文放到google document了](http://docs.google.com/View?id=dg9p7dc4_51ghvwr8gj)。

附脚本：
```

cat imageconvert.sh
#########################################################################
# Author: pengjianqing@gmail.com
# Created Time: Sun 08 Nov 2009 05:42:20 PM CST
# File Name: imageconvert.sh
# Description:Welcome to visit:www.impjq.net for more information.
#########################################################################
#!/bin/bash

mkdir -p ../resized_img/

let i=1
NUM=`ls *.jpg -l|wc -l`
echo "There have ${NUM} images to convert."

for img in `ls *.jpg`;do
echo "Now start to convert the image:${img} (${i}/${NUM})"
#echo "convert -quality 20% ${img} ../resized_img/${img}"
#convert -quality 20% ${img} ../resized_img/${img}
echo "convert -resize 30%x30% ${img} ../resized_img/${img}"
convert -resize 30%x30% ${img} ../resized_img/${img}
((i++))
done

echo "Done."

```

![](http://img.zemanta.com/pixy.gif?x-id=43e265b6-d527-8e31-ba72-8fe4b45f565f)