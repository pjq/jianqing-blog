---
title: "USE标记"
date: 2009-02-21
author: pengjianqing
categories: ['gentoo']
---

USE标记

在管理 USE 标记之前，我们首先要区分 全局 与 本地 的概念。
全局标记，顾名思义，就是系统软件包或绝大部分软件包都会依赖的标记。
本地标记，是针对安装的软件包不同，可自由定制的标记。

当前可用的全局USE标记列表可以在 /usr/portage/profiles/use.desc文件里找到。

当前可用的局部USE标记列表可以在 /usr/portage/profiles/use.local.desc 文件里找到。

BTW, 建议安装 gentoolkit 里, 使用里边的 euse -i 命令来查看详细信息.

添加，修改，删除全局 USE 标记， 我建议改在 /etc/make.conf

而针对本地标签, 则通过制定软件包+标签的方式, 定义在  /etc/portage/package.use 里.

这样的可以有效区分全局和本地, 使其工作在不同的作用域下.

另外, 针对单个软件包, 还可以进行临时的 增删改 USE 标记:

USE="-cups" emerge -avt samba
但不是很推荐这样用，因为当系统升级或装新版软件包时， 原来支持的标记可能被新版去掉，到时候整个软件的使用也会成问题。

USE标签的结构:

所有可以配置 USE 标记的地方
/usr/portage/profile/base/make.defaults
/usr/portage/profile/default-linux/make.defaults
/usr/portage/profile/default-linux/x86/make.defaults
/usr/portage/profile/default-linux/x86/2007.0/make.defaults
/etc/make.conf
/etc/portage/package.use
作为环境变量的USE设定

顺序，从低到高只使用第一次碰到的。比如 package.use 里定义了 -ssl,那么 make.conf 里再定义 ssl 就会被忽略.

1. make.defaults里面的USE默认设定
2. 用户在/etc/make.conf里面的USE设定
3. 用户在/etc/portage/package.use里面的USE设定
4. 作为环境变量的USE设定

以上所有配置文件，除了 make.defaults 不建议修改（emerge --sync 后，你的修改会被覆盖）, 其他的建议分全局

和本地两种作用域来管理.