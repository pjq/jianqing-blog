---
title: "挂载（mount）命令"
date: 2007-08-10
author: pengjianqing
categories: ['Command']
---

在windows操作系统中，

挂载通常是指给磁盘分区（包括被虚拟出来的磁盘分区）分配一个盘符。

这个操作可以通过“计算机管理”中的“磁盘管理”来进行。

第三方软件，如磁盘分区管理软件、虚拟磁盘软件等，通常也附带挂载功能。

在linux操作系统中，

挂载是一个非常重要的功能，使用非常频繁。

它指将一个设备（通常是存储设备）挂接到一个已存在的目录上。

（这个目录可以不为空，但挂载后这个目录下以前的内容将不可用。）

需要理解的是，

linux操作系统将所有的设备都看作文件，

它将整个计算机的资源都整合成一个大的文件目录。

我们要访问存储设备中的文件，必须将文件所在的分区挂载到一个已存在的目录上，

然后通过访问这个目录来访问存储设备。

◆linux下挂载指南：（转载自jaychun.cublog.cn）

◆挂载条件：

1、挂载点必须是一个目录。

2、一个分区挂载在一个已存在的目录上，这个目录可以不为空，但挂载后这个目录下以前的内容将不可用。对于其他操作系统建立的文件系统的挂载也是这样。

◆文件系统格式

需要理解的是：光盘、软盘、其他操作系统使用的文件系统的格式与linux使用的文件系统格式是不一样的。光盘是ISO9660；软盘是fat16或ext2；

windows NT是fat16、NTFS；

windows98是fat16、fat32；

windows2000和windowsXP是fat16、fat32、NTFS。

挂载前要了解linux是否支持所要挂载的文件系统格式。

◆挂载命令

挂载时使用mount命令：

格式：mount [-参数] [设备名称] [挂载点]

其中常用的参数有：

-t 指定设备的文件系统类型，

常见的有： minix linux最早使用的文件系统

ext2 linux目前常用的文件系统

msdos MS-DOS的fat，就是fat16

vfat windows98常用的fat32

nfs 网络文件系统

iso9660 CD-ROM光盘标准文件系统

ntfs windows NT 2000的文件系统

hpfs OS/2文件系统

auto 自动检测文件系统

-o 指定挂载文件系统时的选项。有些也可用在/etc/fstab中。

常用的有 codepage=XXX 代码页 iocharset=XXX 字符集 ro 以只读方式挂载

rw 以读写方式挂载 nouser 使一般用户无法挂载 user 可以让一般用户挂载设备

◆示例

提醒一下，你要把文件系统挂载到哪，首先要先建上个目录。

例子：windows98装在hda1分区，同时计算机上还有软盘和光盘需要挂载。

# mk /mnt/winc

# mk /mnt/floppy

# mk /mnt/cdrom

# mount -t vfat /dev/hda1 /mnt/winc

# mount -t msdos /dev/fd0 /mnt/floppy

# mount -t iso9660 /dev/cdrom /mnt/cdrom

现在就可以进入/mnt/winc等目录读写这些文件系统了。

要保证最后两行的命令不出错，要确保软驱和光驱里有盘。

◆Linux下分区标识

介绍Linux下分区是如何标识的，

通常是 hdyN （IDE 磁盘）或sdyN（SCSI 磁盘）。

y 这个字母标明分区所在的设备。

例如，/dev/hda（第一个 IDE 磁盘）或 /dev/sdb（第二个 SCSI 磁盘）

N 这个数字代表分区的编号。

前四个分区（主分区或扩展分区）是用数字从 1 排列到 4。逻辑分区从 5 开始。

例如，/dev/hda3 是在第一个 IDE 硬盘上的第三个主分区或扩展分区；/dev/sdb6 是在第二个 SCSI 硬盘上的第二个逻辑分区。

◆中文支持

如果你的windows98目录里有中文文件名，使用上面的命令挂载后，显示的是一堆乱码。

这就要用到 -o 参数里的codepage iocharset选项。

codepage指定文件系统的代码页，简体中文中文代码是936；

iocharset指定字符集，简体中文一般用cp936或gb2312。

当挂载的文件系统linux不支持时，mount一定报错，如windows2000的ntfs文件系统。

可以重新编译linux内核以获得对该文件系统的支持或者下个支持ntfs的补丁。

◆自动挂载

每次开机访问windows分区都要运行mount命令显然太烦琐，

我们可以设定让linux在启动的时候也挂载我们希望挂载的分区，如windows分区，

以实现文件系统的自动挂载。

在/etc目录下有个fstab文件，它里面列出了linux开机时自动挂载的文件系统的列表。

我的/etc/fstab文件如下：

LABEL=/ / ext3 defaults 1 1

LABEL=/boot /boot ext3 defaults 1 2 none

/dev/pts devpts gid=5,mode=620 0 0 none

/proc proc defaults 0 0 none

/dev/shm tmpfs defaults 0 0

/dev/hda8 swap swap defaults 0 0

/dev/cdrom /mnt/cdrom udf,iso9660 noauto, owner, kudzu, ro 0 0

/dev/fd0 /mnt/floppy auto noauto,owner,kudzu 0 0

/dev/cdrom1 /mnt/cdrom1 udf, iso9660 noauto, owner, kudzu, ro 0 0

/dev/hdb1 /mnt/winc ntfs defaults,codepage=936,iocharset=cp936 0 0

/dev/hda5 /mnt/wind vfat defaults,codepage=936,iocharset=cp936 0 0

/dev/hda6 /mnt/winf vfat defaults,codepage=936,iocharset=cp936 0 0

在/etc/fstab文件里，

第一列是挂载的文件系统的设备名，

第二列是挂载点，

第三列是挂载的文件系统类型，

第四列是挂载的选项，

选项间用逗号分隔。

在最后三行是我手工添加的windows下的C、D、F盘，

加了codepage=936和iocharset=cp936参数以支持中文文件名。

参数defaults实际上包含了一组默认参数：

rw 以可读写模式挂载 suid 开启用户ID和群组ID设置位 dev 可解读文件系统上的字符或区块设备

exec 可执行二进制文件 auto 自动挂载 nouser 使一般用户无法挂载

async 以非同步方式执行文件系统的输入输出操作

大家可以看到在这个列表里，光驱和软驱是不自动挂载的，参数设置为noauto。

◆挂载ISO文件

挂载ISO格式的命令：

mount -loop -o iocharset=cp936 xxxxx.iso /mnt/iso