---
title: "无线网卡TL-WN321g+配置方法"
date: 2009-04-14
author: pengjianqing
categories: ['自由分类']
---

详见：http://gentoo-pjq.vicp.net/bbs/viewtopic.php?f=6&t=55&sid=58ac702483a8c38a5e527b35f2ed97f0

http://www.linuxsir.org/bbs/thread348367.html
http://www.gentoo-wiki.info/RT73
驱动下载地址，下载最新的，不然编译会有问题：
http://www.ralinktech.com.tw/Home/Support/Linux.html
http://www.ralinktech.com.tw/data/drivers/ReleaseNote-RT73STA-v1102.txt
http://www.ralinktech.com.tw/data/drivers/2009_0206_RT73_Linux_STA_Drv1.1.0.2.tar.bz2

安装过程参照了wiki上过程：http://www.gentoo-wiki.info/RT73
[code]#cp RT73_Linux_STA_Drv1.0.4.0.tar.gz /tmp/
#cd /tmp/
#tar zxvf RT73_Linux_STA_Drv1.0.4.0.tar.gz
#cd /tmp/RT73_Linux_STA_Drv1.0.4.0/Module/
#cp Makefile.6 ./Makefile

Note: you need to modify the Makefile to make the DEVICE(rausb0) to wlan0

# sudo -i
# chmod 755 Makefile
＃ vi Makefile
# type :%s/rausb0/wlan0/gc  # replace all rausb0 to wlan0
:wq! #save and quit

and also need to change ifcfg-rausb0 file to ifcfg-wlan0

# mv ifcfg-rausb0 ifcfg-wlan0

Okey, you can compile the driver NOW!

#make && make install
[/code]

然后用命令，加载驱动模块。
[code]# modprobe rt73

Check if the driver been loaded

# dmesg | tail
[  729.798521] usbcore: registered new interface driver rt73

[/code]
接下去我也做了，但感觉好像没什么用

[code]# mkdir -p /etc/Wireless/RT73STA/
# cp rt73.bin /etc/Wireless/RT73STA/
# dos2unix rt73sta.dat
# cp rt73sta.dat /etc/Wireless/RT73STA/rt73sta.dat
[/code]
dos2unix没有的话，可以
[code]emerge dos2unix[/code]

然后按WIKI 配置网络：
[code]localhost pjq # cat /etc/conf.d/net
# This blank configuration will automatically use DHCP for any net.*
# scripts in /etc/init.d.  To create a more complete configuration,
# please review /etc/conf.d/net.example and save your configuration
# in /etc/conf.d/net (this file :]!).
#config_eth0=("10.0.1.112/24")
#routes_eth0=("default via 10.0.1.1")

config_eth0=("192.168.0.160/24")
routes_eth0=("default via 192.168.0.1")
#config_eth2=("10.1.3.111/24")
#routes_eth2=("default via 10.1.3.1")

#config_eth1=("10.0.1.112/24")
#routes_eth1=("default via 10.0.1.1")
#dns_domain_lo="PJQ.QISDA"
modules=("wpa_supplicant")
wpa_supplicant_wlan0="-Dwext"
config_wlan0=("192.168.0.161/24")
routes_wlan0=("default via 192.168.0.1")
[/code]
主要是添加了下面这段：
[code]modules=("wpa_supplicant")
wpa_supplicant_wlan0="-Dwext"
config_wlan0=("192.168.0.161/24")
routes_wlan0=("default via 192.168.0.1")[/code]

[code]localhost pjq # cat /etc/wpa_supplicant/wpa_supplicant.conf
# This is a network block that connects to any unsecured access point.
# We give it a low priority so any defined blocks are preferred.
#network={
#    key_mgmt=NONE
#    priority=-9999999
#}

ctrl_interface=/var/run/wpa_supplicant
network={
ssid="522"
#mode=1
proto=WPA
#key_mgmt=WPA-EAP
key_mgmt=WPA-PSK
#key_mgmt=WPA2-PSK
# pairwise=TKIP
#  group=TKIP
psk="522lihongpeng"
#auth_alg=OPEN
}
[/code]

创建wlan0链接
[code]ln -s net.lo net.wlan0[/code]

这个时候可以用
[code]rc-update add net.wlan0 default[/code]
添加到系统自动启动

安装图形界面的无线网络管理工具：wicd
[code]emerge wicd[/code]

[code]rc-update del net.wlan0
rc-update del net.eth0

rc-update add wicd default
[/code]

编辑/etc/conf.d/rc
[code]sudo vim /etc/conf.d/rc[/code]
将RC_PLUG_SERVICES修改成下面这样：
[code]RC_PLUG_SERVICES="net.eth0 net.wlan0"[/code]

这样就可以自动启动了。

然后启动wicd-client就可以启动管理界面了：
[attachment=0]2009-04-14-214625_608x429_scrot.png[/attachment]