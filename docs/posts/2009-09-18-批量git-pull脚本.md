---
title: "批量git pull脚本"
date: 2009-09-18
author: pengjianqing
categories: ['自由分类']
---

公司Android dailybuild服务器上,没有对所有目录建立git服务,只有某些目录有,所以无法一次同步所有的代码.
于是我就想先找到所有的.git目录,然后有它的上一级目录执行git pull,这样就能将这个目录同步更新了,用一个循环,就能实现所有的git目录同步了
```

root@ubuntu:~/shell# cat gitsync.sh
#!/bin/sh
GIT_DIR_LIST=~/gitdirlist.txt

echo "find /ruby/ -iname ".git" >${GIT_DIR_LIST}"
find /ruby/ -iname ".git" >${GIT_DIR_LIST}
n=`wc ${GIT_DIR_LIST}|cut -d " " -f2`
count=0

for i in `cat ${GIT_DIR_LIST}`
do
count=`expr ${count} + 1`
echo "Sync ${count}/${n} "
echo "cd ${i},then git pull"
cd ${i}/..&&git pull
done

```

![](http://img.zemanta.com/pixy.gif?x-id=394f5a6e-fd1c-83a9-8efa-4061b2d1ab84)